# JSON

## 	介绍

![image-20230610183453875](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20230610183453875.png)

## 语法

![image-20230610191201833](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20230610191201833.png)



# Vue

![image-20230610193756705](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20230610193756705.png)

![image-20230610193749107](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\image-20230610193749107.png)





# 基本概念

![image-20230611153514279](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230611153514279.png)



![image-20230611153752068](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230611153752068.png)

## 静态web

![image-20230611154200983](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230611154200983.png)

## 动态web

![image-20230611154456724](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230611154456724.png)

![image-20230611154524410](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230611154524410.png)



# web服务器

## 服务器技术

![image-20230611154914687](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230611154914687.png)

![image-20230611155152315](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230611155152315.png)

## web服务器

![image-20230611155413093](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230611155413093.png)

## Tomcat

### 配置

![image-20230611161753168](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230611161753168.png)

![image-20230612162232958](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612162232958.png)

![image-20230612163037994](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612163037994.png)



### 发布一个网站

![image-20230612163859052](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612163859052.png)

# **HTTP**

![image-20230612164143377](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612164143377.png)

![image-20230612164205339](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612164205339.png)

![image-20230612164230667](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612164230667.png)

![image-20230612164425037](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612164425037.png)

 

# Maven

![image-20230612164708240](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612164708240.png)



## 创建Maven项目

![image-20230612190408698](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612190408698.png)

![image-20230612190547393](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612190547393.png)

![image-20230612190746681](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612190746681.png)

![image-20230612190612660](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612190612660.png)

![image-20230612190737620](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612190737620.png)





## 在idea中配置tomcat

![image-20230612191000274](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612191000274.png)

![image-20230612191126999](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612191126999.png)

![image-20230612191357614](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612191357614.png)

![image-20230612191757294](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612191757294.png)

![image-20230612191845100](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612191845100.png)

![image-20230612191943819](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612191943819.png)

![image-20230612192349946](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612192349946.png)



## pom文件



## xml

![image-20230612195150811](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230612195150811.png)



# Servlet

![image-20230614000857743](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614000857743.png)

![image-20230614000923749](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614000923749.png)

![image-20230614001413509](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614001413509.png)

![image-20230614002518106](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614002518106.png)

![image-20230614002423730](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614002423730.png)

![image-20230614002815564](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614002815564.png)

![image-20230614002800621](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614002800621.png)

![image-20230614002851223](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614002851223.png)



## 原理

![image-20230614150304796](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614150304796.png)



## mapping

### 一个servlet对应一个路径

![image-20230614150657573](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614150657573.png)

### 一个servlet对于多个路径

![image-20230614150711401](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614150711401.png) 

### 一个servlet对应通配符路径

![image-20230614150619346](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614150619346.png)



### 默认请求路径（少用）

![image-20230614150651478](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614150651478.png)



### 指定后缀前缀等

![image-20230614150824064](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614150824064.png)



### 优先级问题

![image-20230614151503292](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614151503292.png)



## ServerletContext上下文对象

![image-20230614153337509](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614153337509.png)

![image-20230614153408133](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614153408133.png)



### 配置初始化参数

![image-20230614154313466](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614154313466.png)

### 获取初始化参数

![image-20230614154351353](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614154351353.png)





### 请求转发

  ![image-20230614154528925](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614154528925.png)



**请求转发和重定向不一样**

![image-20230614155935600](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614155935600.png)





### 读取资源文件

![image-20230614161311184](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614161311184.png)

```java
ServletContext servletContext = this.getServletContext();
//使用相对路径，去target下面找，resources的文件和java文件一起被打包在WEB-INF的classes文件下（如果要获取java文件下的Properties要去配置build）
InputStream resourceAsStream = servletContext.getResourceAsStream("/WEB-INF/classes/userData.properties");
Properties properties = new Properties();
properties.load(resourceAsStream);
String user = properties.getProperty("user");
String password = properties.getProperty("password");

PrintWriter writer = resp.getWriter();
writer.println("user:"+user);
writer.println("pwd:"+password);
```



## HttpServletResponse

### 下载文件

 ![image-20230614162259459](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614162259459.png)



### 重定向

![image-20230614225254007](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614225254007.png)

```java
@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    resp.sendRedirect("/mytomcat/downLoad");  //设置重定向
}
```

![image-20230614225936344](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614225936344.png)



## HttpServletRequest

![image-20230614231656127](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230614231656127.png)



# Cookie、Session

## 会话

![image-20230615122327855](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615122327855.png)

![image-20230615125616923](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615125616923.png)

## Cookie

![image-20230615133538225](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615133538225.png)

![image-20230615125712673](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615125712673.png)

![image-20230615130036793](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615130036793.png)



## Session（重点）

![image-20230615132419336](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615132419336.png)

### session使用

```java
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    //解决中文乱码
    req.setCharacterEncoding("UTF-8");
    resp.setCharacterEncoding("UTF-8");
    resp.setContentType("text/html;charset=utf-8");

    //得到Session
    HttpSession session = req.getSession();

    //往Session里面存东西（可以存对象）
    session.setAttribute("name","hahaha");

    //获取Session的Id
    String id = session.getId();

    //判断是不是新的
    if(session.isNew()){
        resp.getWriter().write("这是个新的Session ID:"+id);
    }else{
        resp.getWriter().write("这是一个旧的Session ID："+id);
    }


}
```



### session自动注销，xml中配置

```xml
<!--    设置session默认失效时间-->
    <session-config>
<!--        15分钟后失效-->
        <session-timeout>15</session-timeout>
    </session-config>
```

![image-20230615133522624](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615133522624.png)



**session可以存一个用户的，ServletContext可以存不同用户的（是应用级的）**

![image-20230615133629262](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615133629262.png)



# JSP

## 简介

![image-20230615133911721](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615133911721.png)



## 原理

![image-20230615134536146](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615134536146.png)

![image-20230615134654688](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615134654688.png)

![image-20230615135109480](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615135109480.png)

![image-20230615135056278](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615135056278.png) 

![image-20230615135301116](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615135301116.png)



## 语法

### jsp表达式，脚本片段

![image-20230615232015389](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615232015389.png)



### 脚本片段再实现

![image-20230615232322449](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615232322449.png)



### JSP声明

![image-20230615233001392](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615233001392.png)

![image-20230615233312789](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615233312789.png)



### JSP指令

![image-20230615234536400](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615234536400.png)

![image-20230615234515025](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230615234515025.png)



## JSP内置对象

![image-20230616000926912](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230616000926912.png)

![image-20230616000127387](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230616000127387.png)

![image-20230616001105184](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230616001105184.png)



## JSP标签，JSTL标签，EL表达式

![image-20230616132022039](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230616132022039.png)

![](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230616132533424.png)

![image-20230616132822324](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230616132822324.png)









# JavaBean

![image-20230617143256582](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617143256582.png)





# MVC三层架构

![image-20230617145508117](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617145508117.png)

![image-20230617145827647](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617145827647.png)



# Filter（重点）

![image-20230617150020276](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617150020276.png)

![image-20230617152216153](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617152216153.png)

```java
package com.myJavaWebLearn.filter;

import javax.servlet.*;
import java.io.IOException;

public class CharacterEncodingFilter implements Filter {
    //初始化，服务器启动时进行，等待过滤对象出现
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        System.out.println("初始化");
    }

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        servletRequest.setCharacterEncoding("utf-8");
        servletResponse.setCharacterEncoding("utf-8");
        servletResponse.setContentType("text/html;charset=utf-8");

        System.out.println("filterChain执行前");
        //FilterChain过滤器链，将多个过滤器可以连起来，最后一个再出去
        filterChain.doFilter(servletRequest,servletResponse);  //让请求继续走，如果不写，程序到这就终止了
        System.out.println("filterChain执行后");
    }

//    web服务器关闭时过滤器销毁
    @Override
    public void destroy() {
        System.out.println("过滤器销毁");
    }
}
```

## 在web.xml中配置Filter

```xml
<filter>
        <filter-name>characterEncoding</filter-name>
        <filter-class>com.myJavaWebLearn.filter.CharacterEncodingFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>characterEncoding</filter-name>
<!--        只要是/servlet下的任何请求都会经过该过滤器-->
        <url-pattern>/servlet/*</url-pattern>
    </filter-mapping>
```

## 应用

![image-20230617154402255](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617154402255.png)



# SMBMS项目

![image-20230617163444411](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617163444411.png)

![image-20230617165740139](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617165740139.png)

## 项目搭建

![image-20230617170308645](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617170308645.png)

![image-20230617230419952](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617230419952.png)

![image-20230617230426743](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230617230426743.png)

## 登录页面

![image-20230618133247338](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230618133247338.png)



### 编写前端页面

#### 设置首页

```xml
<!--    设置欢迎页面-->
    <welcome-file-list>
        <welcome-file>login.jsp</welcome-file>
    </welcome-file-list>
```



### 业务层接口

```java
//用户登录
public User login(String userCode,String password);
```



### 业务层实现

```java
package com.mysmbms.service.user;

import com.mysmbms.dao.BaseDao;
import com.mysmbms.dao.user.UserDao;
import com.mysmbms.dao.user.UserDaoImpl;
import com.mysmbms.pojo.User;
import com.mysmbms.util.JDBCUtilsByDruid;
import org.junit.Test;

import java.sql.Connection;
import java.util.List;

public class UserServiceImpl implements UserService{
    //业务层会调用Dao层，所有要引入Dao层
    private UserDao userDao;

    public UserServiceImpl() {
        userDao = new UserDaoImpl();
    }

    @Override
    public User login(String userCode, String password) {
        Connection connection = null;
        //通过业务层调用对应的具体的数据库操作
        connection = JDBCUtilsByDruid.getConnection();
        User loginUser = userDao.getLoginUser(connection,userCode);
        JDBCUtilsByDruid.myclose(null,null,connection);
        return loginUser;
    }
    @Test
    public void test(){
        UserServiceImpl userService = new UserServiceImpl();
        User admin = userService.login("admin", "1234567");
        System.out.println(admin.getUserPassword());

    }
}
```



### 编写servlet 

```java
package com.mysmbms.servlet.user;

import com.mysmbms.pojo.User;
import com.mysmbms.service.user.UserServiceImpl;
import com.mysmbms.util.Constant;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class LoginServlet extends HttpServlet {
    //servlet 控制层调用业务层代码
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println("进入LoginServlet");
        //获取用户名和密码
        String userCode = req.getParameter("userCode");
        String userPassword = req.getParameter("userPassword");

        //调用业务层，去数据库比对用户名和密码
        User user = new UserServiceImpl().login(userCode, userPassword);

        if(user!=null){  //查到了
            //将用户信息放到session中
            req.getSession().setAttribute(Constant.USER_SESSION,user);
            //跳转到主页
            resp.sendRedirect("jsp/frame.jsp");
        }else{ //查无此人，无法登录
            //设置错误信息
            req.setAttribute("error","用户名或密码不正确");
            //转发回该页面，将错误信息携带上
            req.getRequestDispatcher("login.jsp").forward(req,resp);
        }
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
```







![image-20230619153413548](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230619153413548.png)









# 文件上传

![image-20230620112418371](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230620112418371.png)

![image-20230620141931692](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20230620141931692.png)







# 阿里云OSS

![image-20231019194548683](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231019194548683.png)![image-20231019194610933](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231019194610933.png)



![image-20231019194625208](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231019194625208.png)





- 看文档实例

https://help.aliyun.com/zh/oss/developer-reference/simple-upload-11?spm=a2c4g.11186623.0.i17

![image-20231019200555685](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231019200555685.png)

# 登录校验

## 会话技术

![image-20231003181004302](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003181004302.png)





## 会话跟踪技术一：cookie



![image-20231003181253129](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003181253129.png)



## 会话跟踪技术二：Session

![image-20231003181638531](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003181638531.png)



## 会话跟踪技术三：令牌（重点）

![image-20231003181742367](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003181742367.png)

![image-20231003182028238](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003182028238.png)

![image-20231003182124245](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003182124245.png)

### 生成jwt

![image-20231003182721419](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003182721419.png)

![image-20231003182514119](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003182514119.png)



### 解析jwt

![image-20231003182742390](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003182742390.png)

![image-20231003182705166](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003182705166.png)





![image-20231003182803562](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003182803562.png)

![image-20231003182953646](C:\Users\admin\Desktop\学习\笔记\JAVAWeb.assets\image-20231003182953646.png)
